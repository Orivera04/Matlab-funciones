function d=mmcellfun(fun,c,varargin)
%MMCELLFUN Functions on cell array contents. (MM)
% MMCELLFUN(FUN,C) applies the function FUN to the contents of
% all cells in the cell array C, returning the results in a cell
% array of the same size as C.
%
% If FUN is a numeric scalar, simple multiplication is performed.
%
% If FUN is an inline functions, M-file function, or function handle
% each output cell is generated by calling FEVAL, e.g., FEVAL(FUN,C{i}).
%
% MMCELLFUN(FUN,C,P1,P2,...) passes optional parameters to FEVAL:
% FEVAL(FUN,C{i},P1,P2,...).
%
% See also MMNUMFUN, MMSTRUCTFUN, CELLFUN.

% D.C. Hanselman, University of Maine, Orono, ME 04469
% 1/6/00, 1/26/01
% Mastering MATLAB 6, Prentice Hall, ISBN 0-13-019468-9

if ~iscell(c)
   error('Second Argument Must be a Cell Array.')
end
d=cell(size(c));
N=prod(size(c));
if isnumeric(fun) % simple multiplication
   for i=1:N
      d{i}=fun*c{i};
   end
elseif ischar(fun)|isa(fun,'inline')|isa(fun,'function_handle')
   for i=1:N
      d{i}=feval(fun,c{i},varargin{:});
   end
else
   error('Unknown FUN argument.')
end

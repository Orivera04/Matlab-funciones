function char_input = add_char_input(varlabel,init_char)

% Editable input dialogue box - returns a char string  for variable specified
% %         varname: variable name (used for validation)
%         varlabel: label for input
global Scale cancel_win

char_input = init_char ;
cancel_win = 0 ;
% display main figure
charfig = figure('Name', 'New_model_title', ...
                  'NumberTitle','off', ...
                  'Units','normalized', ...
                  'Color',[0.76 0.76 0.76], ...
                  'Position',[.3 .3 .3 .3], ...
                  'Menubar','none',...
                  'Tag','ScalarInputFig');

% display labels
uicontrol('Parent',charfig, ...
          'Units','normalized', ...
          'Position',[.05 .7 .9 .2], ...
          'Style','text', ...
          'BackgroundColor', [0.76 0.76 0.76], ...
          'Fontname','time roman', ...
          'Fontsize', Scale*12, ...
          'HorizontalAlignment','left',...
          'String', sprintf('%s :', varlabel)) ;

% display input box
scalar_value = uicontrol('Parent',charfig, ...
                        'Units','normalized', ...
                        'BackgroundColor',[1 1 1], ...
                        'Position',[.05 .4 .90 .2], ...
                        'HorizontalAlignment','center',...
                        'Fontsize',Scale*12, ...
                        'String', char_input, ...
          	            'Style','edit', ...
                        'Tag', 'ScalarValue') ;

% Add action buttons
uicontrol('Parent',charfig, ...
          'Units','normalized', ...
          'BackgroundColor', [0.76 0.76 0.76], ...
          'Callback', 'uiresume(gcbf)',...
          'FontName','time roman', ...
          'Fontsize',Scale*14, ...
          'Position',[.3 .05 .20 .15], ...
          'String','OK') ;

uicontrol('Parent',charfig, ...
          'Units','normalized', ...
          'BackgroundColor', [0.76 0.76 0.76], ...
          'Callback', ['set_cancel;uiresume(gcbf);'],...
          'FontName','time roman', ...
          'Fontsize',Scale*14, ...
	       'Position',[.55 .05 .30 .15], ...
          'String','Cancel', ...
          'Tag', 'Cancel') ;

       uiwait(charfig) 
       
       if cancel_win == 0
          char_input = get(scalar_value, 'String');
       else
          char_input = [];
       end;
          
   
close(charfig) ;

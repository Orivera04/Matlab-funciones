function payoff(Input1, Input2)
%PAYOFF Equity option portfolio hedging demonstration.
%   Compute the Profit/Loss diagram, Hedging diagram, and Profit probability
%   functions for a portfolio of options and underlying stock.
%
%   Use the plot menu to change the mode of the demonstration.
%
%   See also BLSDEMOS, ONEOPT, SMILE.
%

% payoff(Input1, Input2)
%
% Main GUI for the Profit/Loss Diagram, Hedging Diagram, CDF Functions, and Probability Function
%     Input1 = Probability, Prob, or 2 -> Probability Function
%              CDF, or 3               -> CDF Function
%              Hedging, hedge, or 4    -> Hedging Diagram
%              else                    -> Profit/Loss Diagram
%     
%     Input2 = the example number
%
% Created by Greg Portmann (May 1997)
%

%       Copyright 1995-2002 The MathWorks, Inc.  
%       $Revision: 1.10 $   $Date: 2002/04/14 21:46:06 $ 

% Calls:  payofffn
% Called by:

if nargin < 1
   Input1 = 'payoff';
end
if nargin < 2
   Input2 = 0;
end

%Turn WARNINGS OFF.
swarn = warning('off');

%Setup figure and axes.
a = figure('Units','normalized', ...
   'Color',[0.8 0.8 0.8], ...
   'Interruptible','off', ...
	'MenuBar','none', ...
	'Name','Portfolio Pricing (Profit/Loss Diagram)', ...
	'NumberTitle','off', ...
	'Position',[0.3 0.3 0.4 0.62], ...
   'ResizeFcn','payofffn(''Resize'');', ...
   'Visible','off', ...
	'Tag','Profit/Loss Diagram');

b = axes('Parent',a, ...
	'Units','points', ...
	'Position',[43.2 122.8 298.8 158], ...
   'Tag','Axes1', ...
   'Interruptible','off', ...
	'Visible','off');
%b = axes('Parent',a, ...
%	'Units','points', ...
%	'Box','on', ...
%	'CameraTarget',[0.5 0.5 0.5], ...
%	'CameraTargetMode','manual', ...
%	'CameraUpVector',[0 1 0], ...
%	'Color',[1 1 1], ...
%	'Position',[43.2 122.8 298.8 158], ...
%	'Tag','Axes1', ...
%	'UserData',123, ...
%	'Visible','on', ...
%	'XColor',[0 0 0], ...
%	'YColor',[0 0 0], ...
%	'ZColor',[0 0 0]);
%c = text('Parent',b, ...
%	'Color',[0 0 0], ...
%	'HandleVisibility','callback', ...
%	'HorizontalAlignment','center', ...
%	'Position',[0.498744 -0.107143 0], ...
%	'Tag','Text1', ...
%	'VerticalAlignment','cap', ...
%	'Visible','off');
%set(get(c,'Parent'),'XLabel',c);
%c = text('Parent',b, ...
%	'Color',[0 0 0], ...
%	'HandleVisibility','callback', ...
%	'HorizontalAlignment','center', ...
%	'Position',[-0.071608 0.502381 0], ...
%	'Rotation',90, ...
%	'Tag','Text2', ...
%	'VerticalAlignment','baseline', ...
%	'Visible','off');
%set(get(c,'Parent'),'YLabel',c);
%c = text('Parent',b, ...
%	'Color',[0 0 0], ...
%	'HandleVisibility','callback', ...
%	'HorizontalAlignment','right', ...
%	'Position',[-0.144472 1.04524 0], ...
%	'Tag','Text3', ...
%	'Visible','off');
%set(get(c,'Parent'),'ZLabel',c);
%c = text('Parent',b, ...
%	'Color',[0 0 0], ...
%	'HandleVisibility','callback', ...
%	'HorizontalAlignment','center', ...
%	'Position',[0.498744 1.04048 0], ...
%	'Tag','Text4', ...
%	'VerticalAlignment','bottom', ...
%   'Visible','off');
%set(get(c,'Parent'),'Title',c);


% Modify, Add, Remove, Cancel buttons
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'Callback','payofffn(''ModifyAssetLine'');', ...
   'Interruptible','off', ...
	'Position',[10 22.5 144.5 12], ...
	'String','Modify', ...
	'Tag','PushButtonModify', ...
   'Visible','on');
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'Callback','payofffn(''AddAsset'');', ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''PushButtonAdd''),''Visible'',''Off'');', ...
   'Interruptible','off', ...
	'Position',[10 36 97 12], ...
	'String','Add', ...
	'Tag','PushButtonAdd', ...
	'UserData',1, ...
   'Visible','off');
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'Callback','payofffn(''RemoveAsset'');', ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''PushButtonRemove''),''Visible'',''Off'');', ...
	'Enable','off', ...
   'Interruptible','off', ...
	'Position',[109.5 36 45 12], ...
	'String','Remove', ...
	'Tag','PushButtonRemove', ...
	'Visible','off');
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'Callback','payofffn(''AssetSetupZero'');', ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''PushButtonCancel''),''Visible'',''Off'');', ...
	'Enable','off', ...
   'Interruptible','off', ...
	'Position',[109.5 36 45 12], ...
	'String','Cancel', ...
	'Tag','PushButtonCancel', ...
	'Visible','off');


% Header text
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''TextPortfolioPrice''),''String'',''Current Portfolio'');', ...
   'Interruptible','off', ...
	'Position',[10 85 144.5 9], ...
	'String','Current Portfolio', ...
	'Style','text', ...
   'Tag','TextPortfolioPrice');


% Listbox
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'Callback','payofffn(''ChangeAssetListbox'');', ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''Listbox1''),''String'','''');set(findobj(gcbf,''Tag'',''Listbox1''),''Userdata'',[]);', ...
   'Interruptible','off', ...
	'Position',[10 37 144.5 47], ...
	'Style','listbox', ...
	'Tag','Listbox1', ...
   'Value',1);


% Edit inputs
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'Callback','if ~isnan(payofffn(''CheckInput'',''EditTextNumShares''));payofffn(''SetAssetCost'');end;', ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''EditTextNumShares''),''Visible'',''Off'');', ...
   'Interruptible','off', ...
	'Position',[109.5 23 45 12], ...
	'String','0', ...
	'Style','edit', ...
	'Tag','EditTextNumShares', ...
	'UserData',0, ...
	'Visible','off');
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''TextNumShares''),''Visible'',''Off'');', ...
	'ForegroundColor',[0 0 1], ...
	'HorizontalAlignment','right', ...
   'Interruptible','off', ...
	'Position',[10 23 97 12], ...
	'String','Contracts (long (+), short(-))', ...
	'Style','text', ...
	'Tag','TextNumShares', ...
	'Visible','off');
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''TextStrikePrice''),''Visible'',''Off'');', ...
	'HorizontalAlignment','right', ...
   'Interruptible','off', ...
	'Position',[10 10 97 12], ...
	'String','Strike Price', ...
	'Style','text', ...
	'Tag','TextStrikePrice', ...
   'Visible','off');
mat5='if ~isnan(payofffn(''CheckInput'',''EditTextStrikePrice''));payofffn(''SetAssetCost'');end;';
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'Callback',mat5, ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''EditTextStrikePrice''),''Visible'',''Off'');', ...
   'Interruptible','off', ...
	'Position',[109.5 10 45 12], ...
	'String','100', ...
	'Style','edit', ...
	'Tag','EditTextStrikePrice', ...
	'Visible','off');
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''TextAssetCost''),''Visible'',''Off'');', ...
   'Interruptible','off', ...
	'Position',[10 0 144.5 9], ...
	'String',' ', ...
	'Style','text', ...
   'Tag','TextAssetCost');

% Information window
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''TextInfoWindow1''),''String'',''  '');', ...
   'Interruptible','off', ...
	'Position',[10 0 144.5 20], ...
	'String',['Select the Add menu to ';'add a new investment.  '], ...
	'Style','text', ...
   'Tag','TextInfoWindow1');


% Common input block
% Header
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
   'Interruptible','off', ...
	'Position',[176.5 84 155 9], ...
	'String','Common Inputs', ...
	'Style','text', ...
	'Tag','TextHeader1');

% Frame
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
   'Interruptible','off', ...
	'Position',[166.5 1.5 175 81.75], ...
	'Style','frame', ...
	'Tag','Frame1');

% Text strings
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'HorizontalAlignment','right', ...
   'Interruptible','off', ...
	'Position',[170 66.75 110 12.75], ...
	'String','Current Asset Price', ...
	'Style','text', ...
	'Tag','TextAssetPrice');
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'HorizontalAlignment','right', ...
   'Interruptible','off', ...
	'Position',[170 51 110 12.75], ...
	'String','Annualized Payout Return', ...
	'Style','text', ...
	'Tag','TextAssetReturn');
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'HorizontalAlignment','right', ...
   'Interruptible','off', ...
	'Position',[170 35.25 110 13.5], ...
	'String','Annualized Riskless Return', ...
	'Style','text', ...
	'Tag','TextRisklessReturn');
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'HorizontalAlignment','right', ...
   'Interruptible','off', ...
	'Position',[170 20.25 110 12.75], ...
	'String','Years-to-Expiration', ...
	'Style','text', ...
	'Tag','TextExpiration');
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'HorizontalAlignment','right', ...
   'Interruptible','off', ...
	'Position',[170 4.5 110 12.75], ...
	'String','Annualized Volatility', ...
	'Style','text', ...
   'Tag','TextVolatility');

% Edit texts
mat6='if ~isnan(payofffn(''CheckInput'',''EditTextAssetPrice''));payofffn(''SetAssetCost'');end;payofffn(''PlotPortfolio'');';
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'Callback',mat6, ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''EditTextAssetPrice''),''string'',''100'');', ...
   'Interruptible','off', ...
	'Position',[283 66.75 45 12.75], ...
	'String','100', ...
	'Style','edit', ...
   'Tag','EditTextAssetPrice');

mat7='if ~isnan(payofffn(''CheckInput'',''EditTextAssetReturn''));payofffn(''SetAssetCost'');end;payofffn(''PlotPortfolio'');';
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'Callback',mat7, ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''EditTextAssetReturn''),''string'',''1.00'');', ...
   'Interruptible','off', ...
	'Position',[283 51 45 12.75], ...
	'String','1.00', ...
	'Style','edit', ...
   'Tag','EditTextAssetReturn');

mat8='if ~isnan(payofffn(''CheckInput'',''EditTextRisklessReturn''));payofffn(''SetAssetCost'');end;payofffn(''PlotPortfolio'');';
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'Callback',mat8, ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''EditTextRisklessReturn''),''string'',''1.15'');', ...
   'Interruptible','off', ...
	'Position',[283 35.25 45 13.5], ...
	'String','1.15', ...
	'Style','edit', ...
   'Tag','EditTextRisklessReturn');

mat9='if ~isnan(payofffn(''CheckInput'',''EditTextExpiration''));payofffn(''SetAssetCost'');end;payofffn(''PlotPortfolio'');';
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'Callback',mat9, ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''EditTextExpiration''),''string'',''1.00'');', ...
   'Interruptible','off', ...
	'Position',[283 20.25 45 12.75], ...
	'String','1.00', ...
	'Style','edit', ...
   'Tag','EditTextExpiration');

mat10='if ~isnan(payofffn(''CheckInput'',''EditTextVolatility''));payofffn(''SetAssetCost'');end;payofffn(''PlotPortfolio'');';
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'Callback',mat10, ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''EditTextVolatility''),''string'',''.30'');', ...
   'Interruptible','off', ...
	'Position',[283 4.5 45 12.75], ...
	'String','.30', ...
	'Style','edit', ...
	'Tag','EditTextVolatility');


% Hedging diagram
% Dependent Variable
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'Callback','payofffn(''PlotPortfolio'');', ...
	'CreateFcn','', ...
   'Interruptible','off', ...
	'Position',[30 97 75 15], ...
   'String',str2mat('Value','Delta','Gamma','Theta','Vega','Rho','Omega'), ...
	'Style','popupmenu', ...
	'Tag','PopupVar3', ...
	'Value',1, ...
	'Visible','off');

% Independent variable 1
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'Callback','payofffn(''PlotPortfolio'');', ...
	'CreateFcn','', ...
   'Interruptible','off', ...
   'Position',[138 97 75 15], ...
   'String',str2mat('Asset Price','Payout Return','Riskless Return','Years-to-Expiration','Volatility'), ...
	'Style','popupmenu', ...
	'Tag','PopupVar1', ...
   'Value',1, ...
	'Visible','off');
%	'BackgroundColor',[0.8 0.8 0.8], ...

% Independent variable 2
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
	'Callback','payofffn(''PlotPortfolio'');', ...
	'CreateFcn','', ...
   'Interruptible','off', ...
	'Position',[223 97 75 15], ...
   'String',str2mat('Asset Price','Payout Return','Riskless Return','Years-to-Expiration','Volatility','None'), ...
	'Style','popupmenu', ...
	'Tag','PopupVar2', ...
	'Value',6, ...
	'Visible','off');

% Hedging text
b = uicontrol('Parent',a, ...
	'Units','points', ...
	'BackgroundColor',[.8 .8 .8], ...
   'FontSize',14, ...
   'FontUnits','pixels', ...
   'HorizontalAlignment','center', ...
   'Interruptible','off', ...
	'Position',[110 97 25 17], ...
	'String','= f (', ...
	'Style','text', ...
	'Tag','HedgingText1', ...
	'Visible','off');
b = uicontrol('Parent',a, ...
	'Units','points', ...
   'BackgroundColor',[0.8 0.8 0.8], ...
   'FontSize',18, ...
   'FontUnits','pixels', ...
   'HorizontalAlignment','center', ...
   'Interruptible','off', ...
	'Position',[216 97 5 18], ...
	'String',',', ...
	'Style','text', ...
	'Tag','HedgingText2', ...
	'Visible','off');
b = uicontrol('Parent',a, ...
	'Units','points', ...
   'BackgroundColor',[0.8 0.8 0.8], ...
   'FontSize',14, ...
   'FontUnits','pixels', ...
   'HorizontalAlignment','center', ...
   'Interruptible','off', ...
	'Position',[305 97 3 17], ...
	'String',')', ...
	'Style','text', ...
	'Tag','HedgingText3', ...
	'Visible','off');


% File menu
b = uimenu('Parent',a, ...
	'Label','&File', ...
   'Tag','FileMenu');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''SavePortfolio'');', ...
   'Label','Save Portfolio', ...
	'Tag','FileMenu1');
c = uimenu('Parent',b, ...
	'Callback','payofffn(''LoadPortfolio'');', ...
	'Label','Load Portfolio', ...
	'Tag','FileMenu2');
c = uimenu('Parent',b, ...
	'Callback','print -dsetup', ...
	'Label','Print Setup', ...
	'Separator','on', ...
	'Tag','FileMenu3');
c = uimenu('Parent',b, ...
	'Callback','printfn(gcbf);', ...
	'Label','Print', ...
   'Tag','FileMenu4');
c = uimenu('Parent',b, ...
	'Callback',';', ...
	'Label','Open', ...
	'Separator','on', ...
   'Tag','FileOpen');
d = uimenu('Parent',c, ...
	'Callback','oneopt(1);', ...
	'Label','Black-Scholes Formula', ...
	'Separator','off', ...
   'Tag','FileLaunchBLS');
d = uimenu('Parent',c, ...
	'Callback','oneopt(0);', ...
	'Label','Binomial Trees', ...
	'Separator','off', ...
   'Tag','FileLaunchTree');
d = uimenu('Parent',c, ...
	'Callback','payoff;', ...
	'Label','Profit/Loss Diagram', ...
	'Separator','off', ...
   'Tag','FileLaunchPayoff');
d = uimenu('Parent',c, ...
	'Callback','payoff(''Prob'');', ...
	'Label','Probability Function', ...
	'Separator','off', ...
   'Tag','FileLaunchProb');
d = uimenu('Parent',c, ...
	'Callback','payoff(''CDF'');', ...
	'Label','Cumulative Distribution Function', ...
	'Separator','off', ...
   'Tag','FileLaunchCDF');
d = uimenu('Parent',c, ...
	'Callback','payoff(''Hedging'');', ...
	'Label','Hedging Diagram', ...
	'Separator','off', ...
   'Tag','FileLaunchHedging');
d = uimenu('Parent',c, ...
	'Callback','smile;', ...
	'Label','Implied Volatility Smiles', ...
	'Separator','off', ...
   'Tag','FileLaunchSmiles');
c = uimenu('Parent',b, ...
	'Callback','close(gcbf);', ...
	'Label','Close', ...
	'Separator','on', ...
   'Tag','ClosePayoff');

% Add menu
%   'ForeGroundColor',[1 1 0], ...
b = uimenu('Parent',a, ...
	'Label','&Edit', ...
	'Tag','AddMenu');
c = uimenu('Parent',b, ...
	'Callback','payofffn(''SelectAsset'',1);', ...
	'Label','Asset (Blue)', ...
	'Tag','AddMenu1');
c = uimenu('Parent',b, ...
	'Callback','payofffn(''SelectAsset'',2);', ...
	'Label','Cash (Magenta)', ...
	'Tag','AddMenu2');
c = uimenu('Parent',b, ...
	'Callback','payofffn(''SelectAsset'',3);', ...
	'Label','Forward (Cyan)', ...
	'Tag','AddMenu3');
c = uimenu('Parent',b, ...
	'Callback','payofffn(''SelectAsset'',4);', ...
	'Label','Call (Green)', ...
	'Tag','AddMenu4');
c = uimenu('Parent',b, ...
	'Callback','payofffn(''SelectAsset'',5);', ...
	'Label','Put (Red)', ...
   'Tag','AddMenu5');
c = uimenu('Parent',b, ...
	'Callback','set(findobj(gcbf,''Tag'',''Listbox1''),''Userdata'',[]);set(findobj(gcbf,''Tag'',''Listbox1''),''String'','''');payofffn(''PlotPortfolio'');', ...
	'Label','Delete All', ...
   'Tag','AddMenu5');

% Plot menu
b = uimenu('Parent',a, ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''PlotMenu''),''Userdata'',1);', ...
	'Label','&Plot', ...
	'Tag','PlotMenu', ...
   'UserData',1);

% Diagrams
c = uimenu('Parent',b, ...
   'Callback', ['set(findobj(gcbf,''Tag'',''PayoffMenu''),''Checked'',''on'');', ...
                'set(findobj(gcbf,''Tag'',''ProbMenu''),  ''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''CDFMenu''),   ''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''HedgeMenu''), ''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''PopupVar1''), ''Visible'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''PopupVar2''), ''Visible'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''PopupVar3''), ''Visible'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''HedgingText1''), ''Visible'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''HedgingText2''), ''Visible'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''HedgingText3''), ''Visible'',''off'');', ...
                'set(gcbf,''Name'',''Portfolio Pricing (Profit/Loss Diagram)'');', ...
                'payofffn(''Resize'');', ...
                'payofffn(''PlotPortfolio'');'], ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''PayoffMenu''),''Checked'',''on'');', ...
	'Checked','on', ...
	'Label','Profit/Loss Diagram', ...
	'Tag','PayoffMenu');


c = uimenu('Parent',b, ...
	'Callback', ['set(findobj(gcbf,''Tag'',''PayoffMenu''),''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''ProbMenu''),  ''Checked'',''on'');', ...
                'set(findobj(gcbf,''Tag'',''CDFMenu''),   ''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''HedgeMenu''), ''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''PopupVar1''), ''Visible'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''PopupVar2''), ''Visible'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''PopupVar3''), ''Visible'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''HedgingText1''), ''Visible'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''HedgingText2''), ''Visible'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''HedgingText3''), ''Visible'',''off'');', ...
                'set(gcbf,''Name'',''Portfolio Pricing (Probability Function)'');', ...
                'payofffn(''Resize'');', ...
                'payofffn(''PlotPortfolio'');'], ...
   'CreateFcn','set(findobj(gcbf,''Tag'',''ProbMenu''),''Checked'',''off'');', ...
	'Label','Probability Function', ...
	'Tag','ProbMenu');

c = uimenu('Parent',b, ...
	'Callback', ['set(findobj(gcbf,''Tag'',''PayoffMenu''),''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''ProbMenu''),  ''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''CDFMenu''),   ''Checked'',''on'');', ...
                'set(findobj(gcbf,''Tag'',''HedgeMenu''), ''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''PopupVar1''), ''Visible'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''PopupVar2''), ''Visible'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''PopupVar3''), ''Visible'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''HedgingText1''), ''Visible'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''HedgingText2''), ''Visible'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''HedgingText3''), ''Visible'',''off'');', ...
                'set(gcbf,''Name'',''Portfolio Pricing (Cumulative Distribution Function)'');', ...
                'payofffn(''Resize'');', ...
                'payofffn(''PlotPortfolio'');'], ...
   'CreateFcn','set(findobj(gcbf,''Tag'',''CDFMenu''),''Checked'',''off'');', ...
	'Label','Cumulative Distribution Function', ...
	'Tag','CDFMenu');


c = uimenu('Parent',b, ...
	'Callback', ['set(findobj(gcbf,''Tag'',''PayoffMenu''),''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''ProbMenu''),  ''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''CDFMenu''),   ''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''HedgeMenu''), ''Checked'',''on'');', ...
                'set(findobj(gcbf,''Tag'',''PopupVar1''), ''Visible'',''on'');', ...
                'set(findobj(gcbf,''Tag'',''PopupVar2''), ''Visible'',''on'');', ...
                'set(findobj(gcbf,''Tag'',''PopupVar3''), ''Visible'',''on'');', ...
                'set(findobj(gcbf,''Tag'',''HedgingText1''), ''Visible'',''on'');', ...
                'set(findobj(gcbf,''Tag'',''HedgingText2''), ''Visible'',''on'');', ...
                'set(findobj(gcbf,''Tag'',''HedgingText3''), ''Visible'',''on'');', ...
                'set(gcbf,''Name'',''Portfolio Pricing (Hedging Diagram)'');', ...
                'payofffn(''Resize'');', ...
                'payofffn(''PlotPortfolio'');'], ...
   'CreateFcn','set(findobj(gcbf,''Tag'',''Portfolio Pricing (HedgeMenu)''),''Checked'',''off'');', ...
	'Label','Hedging Diagram', ...
   'Tag','HedgeMenu');

% Plot asset group 
mat11='set(findobj(gcbf,''Tag'',''PlotMenu''),''Userdata'',1);set(findobj(gcbf,''Tag'',''PlotMenu1''),''Checked'',''on'');set(findobj(gcbf,''Tag'',''PlotMenu2''),''Checked'',''off'');set(findobj(gcbf,''Tag'',''PlotMenu3''),''Checked'',''off'');payofffn(''PlotPortfolio'');';
c = uimenu('Parent',b, ...
	'Callback',mat11, ...
	'Checked','on', ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''PlotMenu1''),''Checked'',''on'');', ...
	'Label','Asset Only', ...
	'Separator','on', ...
   'Tag','PlotMenu1');

mat12='set(findobj(gcbf,''Tag'',''PlotMenu''),''Userdata'',2);set(findobj(gcbf,''Tag'',''PlotMenu1''),''Checked'',''off'');set(findobj(gcbf,''Tag'',''PlotMenu2''),''Checked'',''on'');set(findobj(gcbf,''Tag'',''PlotMenu3''),''Checked'',''off'');payofffn(''PlotPortfolio'');';
c = uimenu('Parent',b, ...
	'Callback',mat12, ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''PlotMenu2''),''Checked'',''off'');', ...
	'Label','Asset and Total Portfolio', ...
   'Tag','PlotMenu2');

mat13='set(findobj(gcbf,''Tag'',''PlotMenu''),''Userdata'',3);set(findobj(gcbf,''Tag'',''PlotMenu1''),''Checked'',''off'');set(findobj(gcbf,''Tag'',''PlotMenu2''),''Checked'',''off'');set(findobj(gcbf,''Tag'',''PlotMenu3''),''Checked'',''on'');payofffn(''PlotPortfolio'');';
c = uimenu('Parent',b, ...
	'Callback',mat13, ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''PlotMenu3''),''Checked'',''off'');', ...
	'Label','Total Portfolio Only', ...
   'Tag','PlotMenu3');


% Money value
c = uimenu('Parent',b, ...
   'Callback', ['set(findobj(gcbf,''Tag'',''MixedMenu''),  ''Checked'',''on'');', ...
                'set(findobj(gcbf,''Tag'',''PresentMenu''),''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''FutureMenu''), ''Checked'',''off'');', ...
                'payofffn(''PlotPortfolio'');'], ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''MixedMenu''),''Checked'',''on'');', ...
	'Checked','on', ...
	'Label','Time Value Mixed', ...
	'Separator','on', ...
	'Tag','MixedMenu');

c = uimenu('Parent',b, ...
   'Callback', ['set(findobj(gcbf,''Tag'',''MixedMenu''),  ''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''PresentMenu''),''Checked'',''on'');', ...
                'set(findobj(gcbf,''Tag'',''FutureMenu''), ''Checked'',''off'');', ...
                'payofffn(''PlotPortfolio'');'], ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''PresentMenu''),''Checked'',''off'');', ...
	'Label','Time Value Present', ...
	'Tag','PresentMenu');

c = uimenu('Parent',b, ...
   'Callback', ['set(findobj(gcbf,''Tag'',''MixedMenu''),  ''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''PresentMenu''),''Checked'',''off'');', ...
                'set(findobj(gcbf,''Tag'',''FutureMenu''), ''Checked'',''on'');', ...
                'payofffn(''PlotPortfolio'');'], ...
   'CreateFcn','set(findobj(gcbf,''Tag'',''FutureMenu''),''Checked'',''off'');', ...
	'Label','Time Value Future', ...
   'Tag','FutureMenu');


% Axis menu
b = uimenu('Parent',a, ...
	'Label','&Axis', ...
   'Tag','MenuAxis');

CallbackAxisTool = [... 
'if strcmp(lower(get(findobj(gcbf,''Tag'',''MenuAxisTool''),''Checked'')),''on'')==1;', ...
'  set(findobj(gcbf,''Tag'',''MenuAxisTool''),''Checked'',''off'');', ...
'  close(get(findobj(gcbf,''Tag'',''MenuAxisTool''),''Userdata''));', ...
'else;', ...
'  set(findobj(gcbf,''Tag'',''MenuAxisTool''),''Checked'',''on'');', ...
'  set(findobj(gcbf,''Tag'',''MenuAxisTool''),''Userdata'',axisgui(gca));', ...
'end;', ...
];

% Userdata contains the handle for the resize figure
c = uimenu('Parent',b, ...
	'Callback', CallbackAxisTool, ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''MenuAxisTool''),''Checked'',''off'');', ...
   'DeleteFcn','if strcmp(lower(get(findobj(gcbf,''Tag'',''MenuAxisTool''),''Checked'')),''on'')==1;FigHandle=get(findobj(gcbf,''Tag'',''MenuAxisTool''),''Userdata'');close(FigHandle);end;', ...
   'Label','Axis Tool', ...
   'Userdata', [], ...
   'Tag','MenuAxisTool');

c = uimenu('Parent',b, ...
	'Callback','grid on;set(findobj(gcbf,''Tag'',''MenuGridOn''),''Checked'',''on'');set(findobj(gcbf,''Tag'',''MenuGridOff''),''Checked'',''off'');', ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''MenuGridOn''),''Checked'',''off'');', ...
	'Label','Grid On', ...
	'Separator','on', ...
	'Tag','MenuGridOn');
c = uimenu('Parent',b, ...
	'Callback','grid off;set(findobj(gcbf,''Tag'',''MenuGridOn''),''Checked'',''off'');set(findobj(gcbf,''Tag'',''MenuGridOff''),''Checked'',''on'');', ...
	'CreateFcn','grid off;set(findobj(gcbf,''Tag'',''MenuGridOff''),''Checked'',''on'');', ...
	'Label','Grid Off', ...
   'Tag','MenuGridOff');

b = uimenu('Parent',a, ...
   'Label','&Examples', ...
   'Tag','ExamplesMenu');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',1);', ...
   'Label','Buy Call');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',2);', ...
   'Label','Sell Call');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',3);', ...
   'Label','Buy Put');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',4);', ...
   'Label','Sell Put');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',5);', ...
   'Label','Synthetic Call');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',6);', ...
   'Label','Covered Call');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',7);', ...
   'Label','Protective Put');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',8);', ...
   'Label','Synthetic Future');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',9);', ...
   'Label','Bull Spread');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',10);', ...
   'Label','Bear Spread');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',11);', ...
   'Label','Bull Cylinder');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',12);', ...
   'Label','Bear Cylinder');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',13);', ...
   'Label','Straddle');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',14);', ...
   'Label','Strangle');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',15);', ...
   'Label','Collar');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',16);', ...
   'Label','Range Forward');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',17);', ...
   'Label','Back Spread');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',18);', ...
   'Label','Strap');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',19);', ...
   'Label','Butterfly Spread');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',20);', ...
   'Label','Condor');
c = uimenu('Parent',b, ...
   'Callback','payofffn(''Example'',21);', ...
   'Label','Seagull');


b = uimenu('Parent',a, ...
	'Label','&About', ...
	'Tag','AboutMenu', ...
   'Visible', 'off');
c = uimenu('Parent',b, ...
	'Callback','gpabout;', ...
	'Label','About', ...
	'Tag','AboutMenu1');


b = uimenu('Parent',a, ...
	'Label','&Help', ...
	'Tag','HelpMenu');
c = uimenu('Parent',b, ...
	'CreateFcn','set(findobj(gcbf,''Tag'',''HelpMenu1''),''Checked'',''off'');payofffn(''Initialize'');', ...
	'Callback','if strcmp(lower(get(findobj(gcbf,''Tag'',''HelpMenu1''),''Checked'')),''off'')==1;set(findobj(gcbf,''Tag'',''HelpMenu1''),''Checked'',''on'');set(findobj(gcbf,''Tag'',''HelpMenu''),''Userdata'',payoffh);else;set(findobj(gcbf,''Tag'',''HelpMenu1''),''Checked'',''off'');close(get(findobj(gcbf,''Tag'',''HelpMenu''),''Userdata''));end', ...
	'Label','Help', ...
	'Tag','HelpMenu1');

%pause(0);
if strcmp(lower(Input1),'probability') | strcmp(lower(Input1),'prob') | strcmp(lower(Input1),'2') | Input1 == 2
   % Prob diagram
   set(findobj(a,'Tag','PayoffMenu'),'Checked','off');
   set(findobj(a,'Tag','ProbMenu'),  'Checked','on');
   set(findobj(a,'Tag','CDFMenu'),   'Checked','off');
   set(findobj(a,'Tag','HedgeMenu'), 'Checked','off');
   set(findobj(a,'Tag','PopupVar1'), 'Visible','off');
   set(findobj(a,'Tag','PopupVar2'), 'Visible','off');
   set(findobj(a,'Tag','PopupVar3'), 'Visible','off');
   set(findobj(a,'Tag','HedgingText1'), 'Visible','off');
   set(findobj(a,'Tag','HedgingText2'), 'Visible','off');
   set(findobj(a,'Tag','HedgingText3'), 'Visible','off');
   set(a,'Name','Portfolio Pricing (Probability Function)');
elseif strcmp(lower(Input1),'cdf') | strcmp(lower(Input1),'3') | Input1 == 3
   % CDF diagram
   set(findobj(a,'Tag','PayoffMenu'),'Checked','off');
   set(findobj(a,'Tag','ProbMenu'),  'Checked','off');
   set(findobj(a,'Tag','CDFMenu'),   'Checked','on');
   set(findobj(a,'Tag','HedgeMenu'), 'Checked','off');
   set(findobj(a,'Tag','PopupVar1'), 'Visible','off');
   set(findobj(a,'Tag','PopupVar2'), 'Visible','off');
   set(findobj(a,'Tag','PopupVar3'), 'Visible','off');
   set(findobj(a,'Tag','HedgingText1'), 'Visible','off');
   set(findobj(a,'Tag','HedgingText2'), 'Visible','off');
   set(findobj(a,'Tag','HedgingText3'), 'Visible','off');
   set(a,'Name','Portfolio Pricing (Cumulative Distribution Function)');
elseif strcmp(lower(Input1),'hedge') | strcmp(lower(Input1),'hedging') | strcmp(lower(Input1),'4') | Input1 == 4
   % Hedging diagram
   set(findobj(a,'Tag','PayoffMenu'),'Checked','off');
   set(findobj(a,'Tag','ProbMenu'),  'Checked','off');
   set(findobj(a,'Tag','CDFMenu'),   'Checked','off');
   set(findobj(a,'Tag','HedgeMenu'), 'Checked','on');
   set(findobj(a,'Tag','PopupVar1'), 'Visible','on');
   set(findobj(a,'Tag','PopupVar2'), 'Visible','on');
   set(findobj(a,'Tag','PopupVar3'), 'Visible','on');
   set(findobj(a,'Tag','HedgingText1'), 'Visible','on');
   set(findobj(a,'Tag','HedgingText2'), 'Visible','on');
   set(findobj(a,'Tag','HedgingText3'), 'Visible','on');
   set(a,'Name','Portfolio Pricing (Hedging Diagram)');
else

   % Payoff diagram
end
payofffn('Resize');
payofffn('PlotPortfolio');

if Input2 > 0
   payofffn('Example',Input2);
end

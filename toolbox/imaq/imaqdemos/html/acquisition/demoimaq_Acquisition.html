<!--
Copyright 2001-2004 The MathWorks, Inc.
$Revision: 1.1.6.2 $ $Date: 2004/03/24 20:39:33 $
-->

<!--
This HTML is auto-generated from an m-file.
Your changes will be overwritten.
--><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:x-large">Logging Data To Memory</p><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium;">Overview</p><ul xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd"><li><a href="#Previewing Data">Previewing Data</a></li><li><a href="#Single Frame Acquisition">Single Frame Acquisition</a></li><li><a href="#Multi-Frame Acquisition">Multi-Frame Acquisition</a></li><li><a href="#Viewing Logged Data.">Viewing Logged Data.</a></li></ul><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;">Previewing Data<a name="Previewing Data"></a></p><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">Before logging data, images from an image acquisition device can be previewed live
using the PREVIEW function. Calling the PREVIEW function, will open a preview
window. To close the preview window, use the CLOSEPREVIEW function.
</p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Access an image acquisition device.</span>
vidobj = videoinput(<span style="color:#B20000">'winvideo'</span>, 1);</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Open the preview window.</span>
preview(vidobj)</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;">Single Frame Acquisition<a name="Single Frame Acquisition"></a></p><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">To acquire a single frame, use the GETSNAPSHOT function.
</p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px">snapshot = getsnapshot(vidobj);</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Display the frame in a figure window.</span>
imagesc(snapshot)</pre><img xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" src="demoimaq_Acquisition_img_05_01.gif"><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;">Multi-Frame Acquisition<a name="Multi-Frame Acquisition"></a></p><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">To specify the number of frames to log upon triggering, configure the
video input object's FramesPerTrigger property.
</p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Configure the number of frames to log upon triggering.</span>
set(vidobj, <span style="color:#B20000">'FramesPerTrigger'</span>, 50);</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">An image acquisition object must be running before data can be logged.
To initiate an acquisition, use the START function.
</p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px">start(vidobj)</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Notice that the number of frames being logged to memory ...</span>
numAvail = vidobj.FramesAvailable</pre><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:gray; font-style:italic;">
numAvail =

     7

</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% ... is increasing ...</span>
numAvail = vidobj.FramesAvailable</pre><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:gray; font-style:italic;">
numAvail =

    14

</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% ... over time.</span>
numAvail = vidobj.FramesAvailable</pre><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:gray; font-style:italic;">
numAvail =

    21

</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">To retrieve logged data from memory, use the GETDATA function
with the video input object and the number of frames to retrieve.
</p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Retrieve some of the logged frames.</span>
imageData = getdata(vidobj, 30);</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Notice the number of frames remaining in memory.</span>
numAvail = vidobj.FramesAvailable</pre><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:gray; font-style:italic;">
numAvail =

    13

</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Display the last frame extracted from memory. </span>
imagesc(imageData(:,:,:,30))</pre><img xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" src="demoimaq_Acquisition_img_13_01.gif"><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">To acquire data continuously, configure the FramesPerTrigger property to
infinity. Upon triggering, data will be logged until the video input
object stops running. To stop an object from running, use the STOP
function.
</p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px">set(vidobj, <span style="color:#B20000">'FramesPerTrigger'</span>, inf)</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Initiate the acquisition.</span>
start(vidobj)</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Notice the number of frames in memory.</span>
numAvail = vidobj.FramesAvailable</pre><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:gray; font-style:italic;">
numAvail =

     6

</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Stop the acquisition.</span>
stop(vidobj)</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% View the total number of frames that were logged before stopping.</span>
numAcquired = get(vidobj, <span style="color:#B20000">'FramesAcquired'</span>)</pre><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:gray; font-style:italic;">
numAcquired =

    13

</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Retrieve all logged data.</span>
imageData = getdata(vidobj, numAcquired);</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Display one of the logged frames.</span>
imagesc(imageData(:,:,:,10))</pre><img xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" src="demoimaq_Acquisition_img_20_01.gif"><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;">Viewing Logged Data.<a name="Viewing Logged Data."></a></p><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">To view the most recently logged image data without extracting it from
memory, use the PEEKDATA function with the video input object and the number
of frames to view. Viewing logged data using PEEKDATA will not remove any
logged data from memory.
</p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Configure the number of frames to log upon triggering.</span>
vidobj.FramesPerTrigger = 35;</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Initiate the acquisition.</span>
start(vidobj)</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Wait for the acquisition to finish.</span>
wait(vidobj, 3);</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Verify the number of frames logged to memory.</span>
numAvail = vidobj.FramesAvailable</pre><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:gray; font-style:italic;">
numAvail =

    35

</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Access the logged data without extracting them from memory.</span>
imageData = peekdata(vidobj, numAvail);</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px"><span style="color:green">% Verify that all logged frames are still available in memory.</span>
numFramesAvailable = vidobj.FramesAvailable</pre><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:gray; font-style:italic;">
numFramesAvailable =

    35

</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">Once the video input object is no longer needed, delete and
clear the associated variable.
</p><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="position: relative; left:30px">delete(vidobj)
clear vidobj</pre><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" style="color:#990000; font-weight:bold; font-size:medium; page-break-before: auto;"><a name=""></a></p><p xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">See also IMAQHELP, IMAQDEVICE/PROPINFO, IMAQDEVICE/GETDATA,
IMAQDEVICE/GETSNAPSHOT, IMAQDEVICE/START, IMAQDEVICE/STOP.
</p><originalCode xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd" code="%% Logging Data To Memory
&#xA;
&#xA;%% Previewing Data
&#xA;% Before logging data, images from an image acquisition device can be previewed live 
&#xA;% using the PREVIEW function. Calling the PREVIEW function, will open a preview 
&#xA;% window. To close the preview window, use the CLOSEPREVIEW function.
&#xA;
&#xA;% Access an image acquisition device.
&#xA;vidobj = videoinput('winvideo', 1);
&#xA;
&#xA;%%
&#xA;
&#xA;% Open the preview window.
&#xA;preview(vidobj)
&#xA;
&#xA;%% Single Frame Acquisition
&#xA;% To acquire a single frame, use the GETSNAPSHOT function.
&#xA;snapshot = getsnapshot(vidobj);
&#xA;
&#xA;%%
&#xA;
&#xA;% Display the frame in a figure window.
&#xA;imagesc(snapshot)
&#xA;
&#xA;%% Multi-Frame Acquisition
&#xA;% To specify the number of frames to log upon triggering, configure the
&#xA;% video input object's FramesPerTrigger property.
&#xA;
&#xA;% Configure the number of frames to log upon triggering.
&#xA;set(vidobj, 'FramesPerTrigger', 50);
&#xA;
&#xA;%%
&#xA;% An image acquisition object must be running before data can be logged.
&#xA;% To initiate an acquisition, use the START function.
&#xA;start(vidobj)
&#xA;
&#xA;%%
&#xA;
&#xA;% Notice that the number of frames being logged to memory ...
&#xA;numAvail = vidobj.FramesAvailable
&#xA;
&#xA;%%
&#xA;
&#xA;% ... is increasing ...
&#xA;numAvail = vidobj.FramesAvailable
&#xA;
&#xA;%%
&#xA;
&#xA;% ... over time.
&#xA;numAvail = vidobj.FramesAvailable
&#xA;
&#xA;%%
&#xA;% To retrieve logged data from memory, use the GETDATA function
&#xA;% with the video input object and the number of frames to retrieve.
&#xA;
&#xA;% Retrieve some of the logged frames.
&#xA;imageData = getdata(vidobj, 30);
&#xA;
&#xA;%%
&#xA;
&#xA;% Notice the number of frames remaining in memory.
&#xA;numAvail = vidobj.FramesAvailable
&#xA;
&#xA;%%
&#xA;
&#xA;% Display the last frame extracted from memory. 
&#xA;imagesc(imageData(:,:,:,30))
&#xA;
&#xA;%%
&#xA;% To acquire data continuously, configure the FramesPerTrigger property to
&#xA;% infinity. Upon triggering, data will be logged until the video input
&#xA;% object stops running. To stop an object from running, use the STOP
&#xA;% function.
&#xA;
&#xA;set(vidobj, 'FramesPerTrigger', inf)
&#xA;
&#xA;%%
&#xA;
&#xA;% Initiate the acquisition.
&#xA;start(vidobj)
&#xA;
&#xA;%%
&#xA;
&#xA;% Notice the number of frames in memory.
&#xA;numAvail = vidobj.FramesAvailable
&#xA;
&#xA;%%
&#xA;
&#xA;% Stop the acquisition.
&#xA;stop(vidobj)
&#xA;
&#xA;%%
&#xA;
&#xA;% View the total number of frames that were logged before stopping.
&#xA;numAcquired = get(vidobj, 'FramesAcquired')
&#xA;
&#xA;%%
&#xA;
&#xA;% Retrieve all logged data.
&#xA;imageData = getdata(vidobj, numAcquired);
&#xA;
&#xA;%%
&#xA;
&#xA;% Display one of the logged frames.
&#xA;imagesc(imageData(:,:,:,10))
&#xA;
&#xA;%% Viewing Logged Data.
&#xA;% To view the most recently logged image data without extracting it from 
&#xA;% memory, use the PEEKDATA function with the video input object and the number 
&#xA;% of frames to view. Viewing logged data using PEEKDATA will not remove any
&#xA;% logged data from memory.
&#xA;
&#xA;% Configure the number of frames to log upon triggering.
&#xA;vidobj.FramesPerTrigger = 35;
&#xA;
&#xA;%%
&#xA;
&#xA;% Initiate the acquisition.
&#xA;start(vidobj)
&#xA;
&#xA;%%
&#xA;
&#xA;% Wait for the acquisition to finish.
&#xA;wait(vidobj, 3);
&#xA;
&#xA;%%
&#xA;
&#xA;% Verify the number of frames logged to memory.
&#xA;numAvail = vidobj.FramesAvailable
&#xA;
&#xA;%%
&#xA;
&#xA;% Access the logged data without extracting them from memory.
&#xA;imageData = peekdata(vidobj, numAvail);
&#xA;
&#xA;%%
&#xA;
&#xA;% Verify that all logged frames are still available in memory.
&#xA;numFramesAvailable = vidobj.FramesAvailable
&#xA;
&#xA;%%
&#xA;% Once the video input object is no longer needed, delete and 
&#xA;% clear the associated variable.
&#xA;delete(vidobj)
&#xA;clear vidobj
&#xA;
&#xA;%%
&#xA;% See also IMAQHELP, IMAQDEVICE/PROPINFO, IMAQDEVICE/GETDATA,
&#xA;% IMAQDEVICE/GETSNAPSHOT, IMAQDEVICE/START, IMAQDEVICE/STOP."></originalCode>

clc;
fun=figure(...
   'position',[200 150 400 300],...
   'color',[0 0 0.5],...
   'numbertitle','off',...
   'name','Funciones definidas por el usuario',...
   'resize','off');
%get(fun);

%TEXTOS Y COMANDOS DE LAS FUNCIONES********************************************************
 steptexto=...
      ['function s = step(x)    '
       's=zeros(size(x));       '
       'set= find(x>=0);        '
       's(set)=ones(size(set)); '];
 stepcomandos=str2mat(...
'clc;',...
'x=-2:0.1:2;',...
'y=step(x);',...
'fprintf(''x =\n'');',...
'disp(x);',...
'fprintf(''\n\ny =\n'');',...
'disp(y);');
 
ramptexto=...
      ['function r = ramp(x)    '
       'r=x;                    '
       'set=find(x<0);          '
       'r(set)=zeros(size(set));'];
rampcomandos=str2mat(...
'clc;',...
'x=-2:0.1:2;',...
'y=ramp(x);',...
'fprintf(''x =\n'');',...
'disp(x);',...
'fprintf(''\n\ny =\n'');',...
'disp(y);');
 
 gtexto=...
      ['function a = g(x)       '
       'a=sin(pi*x/2);          '
       'set=find(x<0);          '
       'a(set)=zeros(size(set));'
       'set=find((x>=0)&(x<=1));'
       'set=find(x>1);          '
       'a(set)=ones(size(set)); '];
 gcomandos=str2mat(...
'clc;',...
'x=-2:0.1:3;',...
'y=g(x);',...
'fprintf(''x =\n'');',...
'disp(x);',...
'fprintf(''\n\ny =\n'');',...
'disp(y);');

%FRAMES************************************************************************************
uicontrol( ...
   'style','frame',...
   'position',[10 10 180 260],...
   'backgroundcolor',[0 0 0.6]);
uicontrol( ...
   'style','frame',...
   'position',[210 10 180 260],...
   'backgroundcolor',[0 0 0.6]);
uicontrol( ...
   'style','frame',...
   'position',[10 272 380 25],...
   'backgroundcolor',[0 0 0.6]);

%CUADROS***********************************************************************************
%Cuadro de edicion de comandos para llamar a las funciones
editcuadro=uicontrol( ...
   'style','edit',...
   'position',[20 20 160 90],...
   'max',20,...
   'foregroundcolor',[0 0.8 0],...
   'backgroundcolor',[0 0 0],...
   'callback','evaluar(editcuadro);');
%Cuadro de texto que contiene la definicion de cada funcion
textcuadro=uicontrol( ...
   'style','edit',...
   'max',24,...
   'position',[20 135 160 110],...
   'horizontalalignment','left',...
   'foregroundcolor',[0 0.8 0],...
   'backgroundcolor',[0 0 0]);
t=str2mat(...
   '',...
'Seleccione una funcion, pre',...
'sionando un boton para ver ',...
'la definicion  de  la funcion',...
'y sus respectivos comandos ',...
'de llamada');
set(textcuadro,'string',t);
uicontrol( ...
   'style','text',...
   'position',[20 110 160 20],...
   'backgroundcolor',[0 0 0.6],...
   'foregroundcolor',[1 1 1],...
   'horizontalalignment','left',...
   'string','Comandos:');
uicontrol( ...
   'style','text',...
   'position',[20 245 160 20],...
   'backgroundcolor',[0 0 0.6],...
   'foregroundcolor',[1 1 1],...
   'horizontalalignment','left',...
   'string','Definicion de la funcion:');
uicontrol( ...
   'style','text',...
   'position',[20 275 360 20],...
   'backgroundcolor',[0 0 0.6],...
   'foregroundcolor',[1 1 0],...
   'horizontalalignment','center',...
   'string','Funciones definidas por el usuario');
%BOTONES************************************************************************************
%boton para la funcion step(x)
step=...
   ['set(editcuadro,''string'',stepcomandos);',...
    'set(textcuadro,''string'',steptexto);'];
stepboton=uicontrol( ...
   'style','pushbutton',...
   'position',[240 215 120 40],...
   'string','step (x)',...
   'callback',step);

%Boton para la funcion ramp(x)
ramp=...
   ['set(editcuadro,''string'',rampcomandos);',...
    'set(textcuadro,''string'',ramptexto);'];
rampboton=uicontrol( ...
   'style','pushbutton',...
   'position',[240 150 120 40],...
   'string','ramp (x)',...
   'callback',ramp);

%Boton para la funcion g(x)
g=...
   ['set(editcuadro,''string'',gcomandos);',...
    'set(textcuadro,''string'',gtexto);'];
gboton=uicontrol( ...
   'style','pushbutton',...
   'position',[240 85 120 40],...
   'string','g (x)',...
   'callback',g);

%Boton CERRAR ventana
cerrar=...
   ['close;',...
      'fprintf(''\n\n'');'];
cerrarboton=uicontrol( ...
   'style','pushbutton',...
   'position',[240 20 120 40],...
   'string','Cerrar',...
   'callback',cerrar);

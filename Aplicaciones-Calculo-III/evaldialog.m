function evaldialog
% evaldialog
% evaluates the edit box input and solves
% it either numerically or symbolically
% It is a simple example of GUI interaction
% and the use of eval and solve with some
% error checking and callback issues.
%
% This function is meant to be an example for CSSM and not
% to be used as is.
%
% IT'S NOT FANCY, BUT IT WORKS

% Michael Robbins, CFA
% robbins@us.cibc.com
% michael.robbins@us.cibc.com


callbackstr=['try ' ...
'in=get(h.in,''String'');' ...
'a=ver;' ...
'if get(h.symbolic,''Value'')==1 ' ...
'if strmatch(''Symbolic Math Toolbox'',{a.Name}) ' ...
'if isempty(findstr(''='',in)) ' ...
'in=[in '' = ans''];' ...
'end; ' ...
'out=char(solve(sym(in)));' ...
'else ' ...
'out={''You are not licensed' ...
'to use the symbolic' ...
'toolbox''};' ...
'end;' ...
'else ' ...
'out=num2str(eval(in));' ...
'end;' ...
'catch ' ...
'out=lasterr;' ...
'end;' ...
'set(h.out,''String'',out);' ...
];

h.fig = figure(...
'Units','characters',...
'Color',[0.752941176470588 0.752941176470588 0.752941176470588],...
'IntegerHandle','off',...
'InvertHardcopy',get(0,'defaultfigureInvertHardcopy'),...
'MenuBar','none',...
'Name','EvalDialog',...
'NumberTitle','off',...
'PaperPosition',get(0,'defaultfigurePaperPosition'),...
'Position',[108.6 37.4615384615385 102.4 15.6923076923077],...
'Renderer',get(0,'defaultfigureRenderer'),...
'RendererMode','manual',...
'Resize','off',...
'HandleVisibility','callback',...
'Tag','figure1',...
'UserData',zeros(1,0));

h.frame1 = uicontrol(...
'Parent',h.fig,...
'Units','normalized',...
'ListboxTop',0,...
'Position',[0.53515625 0.406862745098039 0.4375 0.490196078431373],...
'String',{ '' },...
'Style','frame',...
'Tag','frame3');


h.frame2 = uicontrol(...
'Parent',h.fig,...
'Units','normalized',...
'ListboxTop',0,...
'Position',[0.0234375 0.0784313725490196 0.486328125 0.818627450980392],...
'String',{ '' },...
'Style','frame',...
'Tag','frame2');


h.text1 = uicontrol(...
'Parent',h.fig,...
'Units','normalized',...
'CData',zeros(1,0),...
'FontName','Arial',...
'FontSize',10,...
'HorizontalAlignment','left',...
'ListboxTop',0,...
'Position',[0.03125 0.71078431372549 0.208984375 0.107843137254902],...
'String','Input Expression',...
'Style','text',...
'Tag','text1',...
'UserData',zeros(1,0));


h.in = uicontrol(...
'Parent',h.fig,...
'Units','normalized',...
'BackgroundColor',[1 1 1],...
'FontSize',10,...
'HorizontalAlignment','right',...
'ListboxTop',0,...
'Position',[0.25 0.553921568627451 0.23828125 0.269607843137255],...
'String','0',...
'Style','edit',...
'Tag','density');


h.numeric = uicontrol(...
'Parent',h.fig,...
'Units','normalized',...
'FontSize',10,...
'HorizontalAlignment','left',...
'ListboxTop',0,...
'Position',[0.552734375 0.715686274509804 0.408203125 0.0931372549019608],...
'String','Evaluate numerically',...
'Style','radiobutton',...
'Callback','set(h.symbolic,''Value'',0);',...
'Value',1,...
'Tag','english');


h.symbolic = uicontrol(...
'Parent',h.fig,...
'Units','normalized',...
'FontSize',10,...
'HorizontalAlignment','left',...
'ListboxTop',0,...
'Position',[0.552734375 0.495098039215686 0.3984375 0.0931372549019608],...
'String',{'Evaluate symbollically','(requires the Symbolic Tooblox)'},...
'Callback','set(h.numeric,''Value'',0);',...
'Value',0, ...
'Style','radiobutton',...
'Tag','si');


h.out = uicontrol(...
'Parent',h.fig,...
'Units','normalized',...
'BackgroundColor',[1 1 1],...
'CData',zeros(1,0),...
'Enable','inactive',...
'FontSize',10,...
'HorizontalAlignment','right',...
'ListboxTop',0,...
'Position',[0.25 0.191176470588235 0.23828125 0.299019607843137],...
'String','0',...
'Style','text',...
'Tag','mass',...
'UserData',zeros(1,0));


h.text3 = uicontrol(...
'Parent',h.fig,...
'Units','normalized',...
'CData',zeros(1,0),...
'FontName','Arial',...
'FontSize',10,...
'HorizontalAlignment','left',...
'ListboxTop',0,...
'Position',[0.03125 0.387254901960784 0.208984375 0.107843137254902],...
'String','Evaluated Results',...
'Style','text',...
'Tag','text3',...
'UserData',zeros(1,0));


h.eval = uicontrol(...
'Parent',h.fig,...
'Units','normalized',...
'Callback',callbackstr,...
'CData',zeros(1,0),...
'FontSize',10,...
'ListboxTop',0,...
'Position',[0.650390625 0.147058823529412 0.19921875 0.137254901960784],...
'String','Evaluate',...
'Tag','pushbutton1',...
'UserData',zeros(1,0));


h.text6 = uicontrol(...
'Parent',h.fig,...
'Units','normalized',...
'ListboxTop',0,...
'Position',[0.046875 0.862745098039216 0.15625 0.0735294117647059],...
'String','I/O',...
'Style','text',...
'Tag','text13');


h.text6 = uicontrol(...
'Parent',h.fig,...
'Units','normalized',...
'ListboxTop',0,...
'Position',[0.552734375 0.857843137254902 0.08984375 0.0735294117647059],...
'String','Method',...
'Style','text',...
'Tag','text14');

assignin('base','h',h);